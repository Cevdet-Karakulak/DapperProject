@model List<DapperProject.Dtos.SalesDto.SalesListDto>

@{
    ViewData["Title"] = "Satış Listesi";
    Layout = "~/Views/AdminLayout/_AdminLayout.cshtml";
    int currentPage = ViewBag.CurrentPage ?? 1;
    int totalPages = ViewBag.TotalPages ?? 1;
    string search = ViewBag.Search ?? "";
    string city = ViewBag.City ?? "";
    string brand = ViewBag.Brand ?? "";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<style>
    thead th {
        background: linear-gradient(45deg, #6a11cb, #2575fc);
        color: white;
        font-weight: 700;
        text-align: center;
        box-shadow: 0 2px 8px rgba(38, 0, 255, 0.3);
        border: none;
    }

        thead th:nth-child(1) {
            background: #6f42c1;
        }
        thead th:nth-child(2) {
            background: #0d6efd;
        }
        thead th:nth-child(3) {
            background: #198754;
        }
        thead th:nth-child(4) {
            background: #dc3545;
        }
        thead th:nth-child(5) {
            background: #fd7e14;
        }
        thead th:nth-child(6) {
            background: #20c997;
        }

    tbody tr:hover {
        background-color: #f0f8ff;
        transition: background-color 0.3s ease;
    }

    tbody td {
        text-align: center;
        font-weight: 500;
        color: #222;
        padding: 12px 8px;
    }

    tbody tr:nth-child(even) {
        background-color: #f9f9ff;
    }
</style>

<h2 class="mb-4 text-primary fw-bold">Satış Listesi</h2>

<form method="get" class="row g-4 align-items-end mb-4">

    <div class="col-md-3">
        <label for="search" class="form-label fw-semibold text-primary">Ürün veya Müşteri</label>
        <input type="text" id="search" name="search" value="@ViewBag.Search"
               class="form-control border-primary shadow-sm"
               placeholder="Arama..." style="background:#e7f1ff; color:#003366; font-weight:500;" />
    </div>

    <div class="col-md-3">
        <label for="city" class="form-label fw-semibold text-success">Şehir</label>
        <input type="text" id="city" name="city" value="@ViewBag.City"
               class="form-control border-success shadow-sm"
               placeholder="Şehir" style="background:#e9f7ef; color:#2a7a33; font-weight:500;" />
    </div>

    <div class="col-md-3">
        <label for="brand" class="form-label fw-semibold text-danger">Marka</label>
        <input type="text" id="brand" name="brand" value="@ViewBag.Brand"
               class="form-control border-danger shadow-sm"
               placeholder="Marka" style="background:#fde7e7; color:#7a1f1f; font-weight:500;" />
    </div>

    <div class="col-md-3 d-grid">
        <button type="submit" class="btn btn-gradient btn-lg fw-bold"
                style="
              background: linear-gradient(45deg, #6a11cb, #2575fc);
              color: white;
              box-shadow: 0 4px 15px rgba(101, 71, 255, 0.4);
              border: none;
              transition: background 0.3s ease;
              height: 100%;
              min-height: 44px; /* input yüksekliği kadar */
            "
                onmouseover="this.style.background='linear-gradient(45deg, #2575fc, #6a11cb)';"
                onmouseout="this.style.background='linear-gradient(45deg, #6a11cb, #2575fc)';">
            Ara
        </button>
    </div>

</form>



<table class="table table-bordered table-hover">
    <thead>
        <tr>
            <th>ID</th>
            <th>Ürün Adı</th>
            <th>Marka</th>
            <th>Şehir</th>
            <th>Toplam Fiyat (₺)</th>
            <th>Tarih</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.ID</td>
                <td>@item.ITEMNAME</td>
                <td>@item.BRAND</td>
                <td>@item.CITY</td>
                <td>@string.Format(new System.Globalization.CultureInfo("tr-TR"), "{0:C}", item.TOTALPRICE)</td>
                <td>@item.DATE_.ToString("dd.MM.yyyy")</td>
            </tr>
        }
    </tbody>
</table>

<nav>
    <ul class="pagination justify-content-center">
        <li class="page-item @(currentPage == 1 ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("Index", new { page = 1, search = search, city = city, brand = brand })">İlk</a>
        </li>
        <li class="page-item @(currentPage == 1 ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("Index", new { page = currentPage - 1, search = search, city = city, brand = brand })">Önceki</a>
        </li>

        @for (int i = 1; i <= totalPages && i <= 10; i++)
        {
            <li class="page-item @(i == currentPage ? "active" : "")" aria-current="page">
                <a class="page-link" href="@Url.Action("Index", new { page = i, search = search, city = city, brand = brand })">@i</a>
            </li>
        }

        <li class="page-item @(currentPage == totalPages ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("Index", new { page = currentPage + 1, search = search, city = city, brand = brand })">Sonraki</a>
        </li>
        <li class="page-item @(currentPage == totalPages ? "disabled" : "")">
            <a class="page-link" href="@Url.Action("Index", new { page = totalPages, search = search, city = city, brand = brand })">Son</a>
        </li>
    </ul>
</nav>
